<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>HUT 3 â€“ AR Candy Catcher (Game)</title>
  <style>
    :root{ --brand:#111827; --accent:#ff3e7f; --good:#16a34a; --bad:#ef4444; }
    html,body{margin:0;padding:0;height:100%;background:#000;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    #app{position:fixed;inset:0;overflow:hidden;background:#000;color:#fff;}
    video#cam{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transform:scaleX(-1);display:none;}
    canvas#game{position:absolute;inset:0;width:100%;height:100%;}
    .hud{position:absolute;left:0;right:0;top:0;display:flex;justify-content:space-between;align-items:center;padding:12px 14px;pointer-events:none;}
    .badge{pointer-events:auto;background:rgba(0,0,0,.55);color:#fff;padding:6px 10px;border-radius:12px;font-weight:600;backdrop-filter:blur(6px)}
    .score{font-size:18px}
    .timer{font-variant-numeric:tabular-nums}
    .controls{position:absolute;right:12px;bottom:12px;display:flex;gap:8px}
    button{pointer-events:auto;border:none;border-radius:999px;padding:10px 14px;background:var(--accent);color:#fff;font-weight:700;box-shadow:0 8px 24px rgba(0,0,0,.3);cursor:pointer}
    button.secondary{background:rgba(0,0,0,.55)}
    .frame{position:absolute;inset:0;border:10px solid var(--brand); box-shadow: inset 0 0 0 2px rgba(255,255,255,.06); pointer-events:none}
    .logo{position:absolute;left:20px;bottom:20px;pointer-events:none;padding:10px;background:transparent;}
    .logo img{display:block;height:50px}
    .overlay{position:absolute;inset:0;display:grid;place-items:center;background:linear-gradient(0deg,rgba(0,0,0,.75),rgba(0,0,0,.35));color:#fff;text-align:center;padding:24px}
    .end{position:absolute;inset:0;display:none;place-items:center;background:linear-gradient(0deg,rgba(0,0,0,.75),rgba(0,0,0,.35));color:#fff;}
    .end.active{display:grid;}
    .end .card{background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:20px;max-width:520px;color:#fff;}
    .end .card h2{margin:0 0 8px 0;color:#fff;}
    .end .card p, .end .card input, .end .card button, .end .card .small{color:#fff;}
    .end .input{display:flex;gap:10px;margin-top:10px}
    .end .input input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.4);}
    .small{font-size:12px;opacity:.8;margin-top:8px}
  </style>
</head>
<body>
  <div id="app">
    <video id="cam" autoplay playsinline muted></video>
    <canvas id="game"></canvas>

    <div class="hud">
      <div class="badge score">Score: <span id="score">0</span></div>
      <div class="badge timer">Time: <span id="time">30</span>s</div>
    </div>

    <div class="controls">
      <button id="btnStart">Start</button>
      <button id="btnMute" class="secondary">Mute</button>
      <button id="btnDebug" class="secondary">Debug</button>
    </div>

    <div class="frame"></div>
    <div class="logo">
      <img src="https://hut-3.com/wp-content/themes/hut3/images/logo-hut3.svg" alt="HUT 3 logo" />
    </div>

    <div id="end" class="end">
      <div class="card">
        <h2>Great job! Your score: <span id="finalScore">0</span></h2>
        <p>Enter the prize draw: submit your email with your score.</p>
        <div class="input">
          <input id="email" type="email" placeholder="you@company.com" required />
          <button id="submitScore">Submit</button>
        </div>
        <p class="small">By submitting you agree to the prize draw terms and that HUT 3 may contact you about marketing services. You can unsubscribe anytime.</p>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('btnStart').addEventListener('click', async () => {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
        const video = document.getElementById('cam');
        video.srcObject = stream;
        video.style.display = 'block';
      } catch (err) {
        alert('Camera access is required to play. Please enable it in your browser settings.');
      }
    });
  </script>
</body>
</html>
